<link rel="import" href="./components/polymer/polymer.html">
<!-- <link rel="import" href="./components/google-apis/google-maps-api.html"> -->
<link rel="import" href="./components/google-map/google-map.html">
<link rel="import" href="./location-search.html">
<dom-module id="maps-test">
<style>
  google-map {
    height: 500px;
    width:500px;
  }
</style>
<template>
  <google-map map={{map}} fit-to-marker api-key="AIzaSyC-H_Y4bhZTwrirdR0s-nMHI3y6pPoiGd4" on-api-load="on_api_load">
  <google-map-marker id="marker" latitude="{{lat}}" longitude="{{long}}" draggable="true" mouse-events="true" on-google-map-marker-mouseup="f" ></google-map-marker>
</google-map>
<location-search place={{place}}></location-search>
  <p>xD</p>
</template>

<script>
Polymer({
  is:"maps-test",
  ready:function(){
    //drag-events="true" google-map-marker-dragend="f"
  },
  properties:{
    long:{value:37.78},
    lat:{value:-122.4},
    map:{},
    place:{
      observer:"g"
    }
  },
  on_api_load:function(){
    console.log(this.$.marker.position)

    google.maps.event.addListener(this.$.marker,"dragend",function(e){
        console.log(this.$.marker.position)
    })


  },
  f:function(){
    console.log(this.long)

  },
  g:function(){
    if(this.place.geometry != null){
      console.log()
      this.lat = this.place.geometry.location.lat()
      this.long = this.place.geometry.location.lng()
      this.map.setCenter(new google.maps.LatLng(this.lat,this.long))
    }

  }
})


</script>
</dom-module>
